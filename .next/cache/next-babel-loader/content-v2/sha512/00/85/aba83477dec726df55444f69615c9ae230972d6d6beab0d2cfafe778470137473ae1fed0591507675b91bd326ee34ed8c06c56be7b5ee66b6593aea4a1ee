{"ast":null,"code":"import _defineProperty from \"/Users/kings/Downloads/AV SERVICE WEBSITE/AV_SERVICE_WEBISTE_FULL/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/kings/Downloads/AV SERVICE WEBSITE/AV_SERVICE_WEBISTE_FULL/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/kings/Downloads/AV SERVICE WEBSITE/AV_SERVICE_WEBISTE_FULL/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/kings/Downloads/AV SERVICE WEBSITE/AV_SERVICE_WEBISTE_FULL/src/components/local/services/feedback/PageLayout.tsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from \"react\";\nimport { message, Result } from \"antd\";\n// config\nimport { DOMAIN_URL } from \"../../../../../config/index\";\nconsole.log(\"DOMAIN URL\", DOMAIN_URL); // components\n\nimport Feedback from \"../feedback/components/Feedback\"; // utils\n\nimport { SC } from \"./utils\";\nimport { submitFeedback } from \"../../../../utils/Apicalls\";\nimport router from \"next/router\";\nimport { cryptData } from \"../../../../utils/utils\";\n\nvar Header = function Header(_ref) {\n  var companyInfo = _ref.companyInfo;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column flex-md-row align-items-center pb-3 mb-4 border-bottom\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/\",\n          className: \"d-flex align-items-center text-dark text-decoration-none\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"logo-size\",\n            src: companyInfo === null || companyInfo === void 0 ? void 0 : companyInfo.c_logo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 13\n          }, _this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"fs-4\",\n            children: [companyInfo === null || companyInfo === void 0 ? void 0 : companyInfo.c_name, \" - Feedback Surveys\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false);\n};\n\n_c = Header;\n\nvar FeedbackDescription = function FeedbackDescription(_ref2) {\n  _s();\n\n  var feedbackInfo = _ref2.feedbackInfo,\n      survey = _ref2.survey,\n      submitedStat = _ref2.submitedStat;\n\n  var _useState = useState(typeof feedbackInfo.q_format !== \"undefined\" && feedbackInfo.q_format !== \"\" ? JSON.parse(feedbackInfo.q_format) : []),\n      questions = _useState[0],\n      setQuestions = _useState[1];\n\n  var f_questionEditor_cust = function f_questionEditor_cust(uuid, type, value, option) {\n    if (value) {\n      setAnswered(true);\n    } else {\n      setAnswered(false);\n    }\n\n    console.log(uuid, type, value, questions, option);\n    var result = SC.fc.f_questionEditor(uuid, type, value, questions, option);\n    setQuestions(result);\n  };\n\n  var _useState2 = useState({\n    name: \"\",\n    email: \"\"\n  }),\n      userData = _useState2[0],\n      setUserData = _useState2[1];\n\n  var _useState3 = useState(null),\n      startTime = _useState3[0],\n      setStartTime = _useState3[1];\n\n  var _useState4 = useState(false),\n      answered = _useState4[0],\n      setAnswered = _useState4[1];\n\n  var handleSubmit = function handleSubmit() {\n    var handleFeedbackSubmit = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _router$query, c, ct, f, c_id, fc_id, fdq_id, endTime, time, sec, formData, res, _err$response$data, _err$response$data$me, _err$response$data2, _err$response$data2$m, _err$response$data3, _err$response$data3$m, _err$response$data4, _err$response$data4$m;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _router$query = router.query, c = _router$query.c, ct = _router$query.ct, f = _router$query.f;\n                _context.next = 3;\n                return cryptData(\"dec\", c);\n\n              case 3:\n                c_id = _context.sent;\n                _context.next = 6;\n                return cryptData(\"dec\", ct);\n\n              case 6:\n                fc_id = _context.sent;\n                _context.next = 9;\n                return cryptData(\"dec\", f);\n\n              case 9:\n                fdq_id = _context.sent;\n                endTime = new Date().getTime();\n                time = endTime - startTime;\n                sec = Math.floor(time / 1000 % 60); // console.log(\"Time taken\", sec);\n\n                formData = new FormData();\n                formData.append(\"c_id\", c_id);\n                formData.append(\"fc_id\", fc_id);\n                formData.append(\"fdq_id\", fdq_id);\n                formData.append(\"fdqa_time_taken_to_finish\", JSON.stringify(sec));\n                formData.append(\"fdqa_qst_ans_json_format\", JSON.stringify(questions));\n                formData.append(\"name\", userData === null || userData === void 0 ? void 0 : userData.name);\n                formData.append(\"email\", userData === null || userData === void 0 ? void 0 : userData.email);\n                console.log(formData);\n                _context.prev = 22;\n                _context.next = 25;\n                return submitFeedback(formData);\n\n              case 25:\n                res = _context.sent;\n                console.log(\"RES\", res); //     {\n                //     c_id: parseInt(c_id),\n                //     fc_id: parseInt(fc_id),\n                //     fdq_id: parseInt(fdq_id),\n                // name: userData?.name,\n                // email: userData?.email,\n                //     fdqa_time_taken_to_finish: sec,\n                //     fdqa_qst_ans_json_format: questions,\n                // }\n\n                submitedStat.setIsSubmitted(true);\n                _context.next = 34;\n                break;\n\n              case 30:\n                _context.prev = 30;\n                _context.t0 = _context[\"catch\"](22);\n                ((_err$response$data = _context.t0.response.data) === null || _err$response$data === void 0 ? void 0 : (_err$response$data$me = _err$response$data.message) === null || _err$response$data$me === void 0 ? void 0 : _err$response$data$me.email) && message.error((_err$response$data2 = _context.t0.response.data) === null || _err$response$data2 === void 0 ? void 0 : (_err$response$data2$m = _err$response$data2.message) === null || _err$response$data2$m === void 0 ? void 0 : _err$response$data2$m.email[0]);\n                ((_err$response$data3 = _context.t0.response.data) === null || _err$response$data3 === void 0 ? void 0 : (_err$response$data3$m = _err$response$data3.message) === null || _err$response$data3$m === void 0 ? void 0 : _err$response$data3$m.name) && message.error((_err$response$data4 = _context.t0.response.data) === null || _err$response$data4 === void 0 ? void 0 : (_err$response$data4$m = _err$response$data4.message) === null || _err$response$data4$m === void 0 ? void 0 : _err$response$data4$m.name[0]);\n\n              case 34:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[22, 30]]);\n      }));\n\n      return function handleFeedbackSubmit() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    handleFeedbackSubmit();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid py-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"display-5 fw-bold\",\n        children: feedbackInfo === null || feedbackInfo === void 0 ? void 0 : feedbackInfo.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"col-md-8 fs-4\",\n        children: feedbackInfo === null || feedbackInfo === void 0 ? void 0 : feedbackInfo.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, _this), !survey.isSurveyClicked ? /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: function onSubmit(e) {\n          e.preventDefault;\n          console.log(\"take survey\");\n          setStartTime(new Date().getTime());\n          survey.setIsSurveyClicked(true);\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"inputUserName\",\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            id: \"inputUserName\",\n            \"aria-describedby\": \"input-user-name\",\n            placeholder: \"Enter name\",\n            required: true,\n            onChange: function onChange(e) {\n              return setUserData(function (s) {\n                return _objectSpread(_objectSpread({}, s), {}, {\n                  name: e.target.value\n                });\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"inputUserEmail\",\n            children: \"Email address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            className: \"form-control\",\n            id: \"inputUserEmail\",\n            \"aria-describedby\": \"input-user-email\",\n            placeholder: \"Enter email\" // required\n            ,\n            onChange: function onChange(e) {\n              return setUserData(function (s) {\n                return _objectSpread(_objectSpread({}, s), {}, {\n                  email: e.target.value\n                });\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary btn-lg\",\n          type: \"submit\",\n          children: \"Take Survey\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) // <button\n      //     onClick={() => {\n      //         console.log(\"cancel survey\");\n      //         survey.setIsSurveyClicked(false);\n      //     }}\n      //     className=\"btn btn-danger btn-lg\"\n      //     type=\"button\"\n      // >\n      //     Cancel Survey\n      // </button>\n      ]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, _this), survey.isSurveyClicked && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid py-5\",\n      children: /*#__PURE__*/_jsxDEV(Feedback, {\n        setQuestions: setQuestions,\n        answered: answered,\n        setAnswered: setAnswered,\n        questions: questions,\n        f_questionEditor_cust: f_questionEditor_cust,\n        handleSubmit: handleSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(FeedbackDescription, \"yeyO78e7OQjENT6PFLw4k73B6iA=\");\n\n_c2 = FeedbackDescription;\n\nvar PageLayout = function PageLayout(_ref4) {\n  _s2();\n\n  var feedbackContent = _ref4.feedbackContent,\n      survey = _ref4.survey;\n\n  var _useState5 = useState(false),\n      isSubmitted = _useState5[0],\n      setIsSubmitted = _useState5[1];\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-4\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      companyInfo: feedbackContent === null || feedbackContent === void 0 ? void 0 : feedbackContent.companyInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-5 mb-4 rounded-3 shadow-lg\",\n      children: !isSubmitted ? /*#__PURE__*/_jsxDEV(FeedbackDescription, {\n        feedbackInfo: feedbackContent === null || feedbackContent === void 0 ? void 0 : feedbackContent.feedbackInfo,\n        survey: survey,\n        submitedStat: {\n          isSubmitted: isSubmitted,\n          setIsSubmitted: setIsSubmitted\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }, _this) : /*#__PURE__*/_jsxDEV(Result, {\n        status: \"success\",\n        title: \"Feedback has been Successfully Submitted!\",\n        subTitle: \"Thanks for completing this Feedback. Now create your own \\u2014 it's free, easy, & beautiful\",\n        extra: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          type: \"button\",\n          onClick: function onClick() {\n            return location.reload();\n          },\n          children: \"Take me there!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 15\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, _this);\n};\n\n_s2(PageLayout, \"y0UBtSRcKf2AGGJv1w8GuwACgkA=\");\n\n_c3 = PageLayout;\nexport default PageLayout;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Header\");\n$RefreshReg$(_c2, \"FeedbackDescription\");\n$RefreshReg$(_c3, \"PageLayout\");","map":{"version":3,"sources":["/Users/kings/Downloads/AV SERVICE WEBSITE/AV_SERVICE_WEBISTE_FULL/src/components/local/services/feedback/PageLayout.tsx"],"names":["useState","message","Result","DOMAIN_URL","console","log","Feedback","SC","submitFeedback","router","cryptData","Header","companyInfo","c_logo","c_name","FeedbackDescription","feedbackInfo","survey","submitedStat","q_format","JSON","parse","questions","setQuestions","f_questionEditor_cust","uuid","type","value","option","setAnswered","result","fc","f_questionEditor","name","email","userData","setUserData","startTime","setStartTime","answered","handleSubmit","handleFeedbackSubmit","query","c","ct","f","c_id","fc_id","fdq_id","endTime","Date","getTime","time","sec","Math","floor","formData","FormData","append","stringify","res","setIsSubmitted","response","data","error","title","description","isSurveyClicked","e","preventDefault","setIsSurveyClicked","s","target","PageLayout","feedbackContent","isSubmitted","location","reload"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { message, Result } from \"antd\";\nimport Link from \"next/link\";\n\n// config\nimport { DOMAIN_URL } from \"../../../../../config/index\";\n\nconsole.log(\"DOMAIN URL\", DOMAIN_URL);\n\n// components\nimport Feedback from \"../feedback/components/Feedback\";\n\n// utils\nimport { SC } from \"./utils\";\nimport { submitFeedback } from \"../../../../utils/Apicalls\";\nimport router from \"next/router\";\nimport { cryptData } from \"../../../../utils/utils\";\n\nconst Header = ({ companyInfo }: any) => {\n  return (\n    <>\n      <header>\n        <div className=\"d-flex flex-column flex-md-row align-items-center pb-3 mb-4 border-bottom\">\n          <a\n            href=\"/\"\n            className=\"d-flex align-items-center text-dark text-decoration-none\"\n          >\n            <img className=\"logo-size\" src={companyInfo?.c_logo} />\n            &nbsp;&nbsp;\n            <span className=\"fs-4\">\n              {companyInfo?.c_name} - Feedback Surveys\n            </span>\n          </a>\n        </div>\n      </header>\n      {/* <div className=\"p-5 mb-4 bg-soft-primary rounded-3 shadow-lg\">\n                <div className=\"container-fluid py-5\">\n                    <h1 className=\"display-5 fw-bold\">About Us</h1>\n                    <p\n                        className=\"col-md-8 fs-4\"\n                        dangerouslySetInnerHTML={{\n                            __html: companyInfo?.c_description,\n                        }}\n                    />\n                    <button className=\"btn btn-primary btn-lg\" type=\"button\">\n                        View all surveys\n                    </button>\n                </div>\n            </div> */}\n    </>\n  );\n};\n\nconst FeedbackDescription = ({ feedbackInfo, survey, submitedStat }: any) => {\n  const [questions, setQuestions] = useState<any>(\n    typeof feedbackInfo.q_format !== \"undefined\" && feedbackInfo.q_format !== \"\"\n      ? JSON.parse(feedbackInfo.q_format)\n      : []\n  );\n\n  const f_questionEditor_cust = (\n    uuid: string,\n    type: string,\n    value: string,\n    option: string\n  ) => {\n    if (value) {\n      setAnswered(true);\n    } else {\n      setAnswered(false);\n    }\n\n    console.log(uuid, type, value, questions, option);\n    const result = SC.fc.f_questionEditor(uuid, type, value, questions, option);\n\n    setQuestions(result);\n  };\n  const [userData, setUserData] = useState<{ name: string; email: string }>({\n    name: \"\",\n    email: \"\",\n  });\n  const [startTime, setStartTime] = useState<any>(null);\n  const [answered, setAnswered] = useState<boolean>(false);\n\n  const handleSubmit = () => {\n    const handleFeedbackSubmit = async () => {\n      const { c, ct, f } = router.query;\n      const c_id = await cryptData(\"dec\", c);\n      const fc_id = await cryptData(\"dec\", ct);\n      const fdq_id = await cryptData(\"dec\", f);\n      const endTime = new Date().getTime();\n      const time = endTime - startTime;\n      let sec = Math.floor((time / 1000) % 60);\n      // console.log(\"Time taken\", sec);\n      const formData = new FormData();\n      formData.append(\"c_id\", c_id);\n      formData.append(\"fc_id\", fc_id);\n      formData.append(\"fdq_id\", fdq_id);\n      formData.append(\"fdqa_time_taken_to_finish\", JSON.stringify(sec));\n      formData.append(\"fdqa_qst_ans_json_format\", JSON.stringify(questions));\n      formData.append(\"name\", userData?.name);\n      formData.append(\"email\", userData?.email);\n\n      console.log(formData);\n\n      try {\n        const res = await submitFeedback(formData);\n        console.log(\"RES\", res);\n        //     {\n        //     c_id: parseInt(c_id),\n        //     fc_id: parseInt(fc_id),\n        //     fdq_id: parseInt(fdq_id),\n        // name: userData?.name,\n        // email: userData?.email,\n        //     fdqa_time_taken_to_finish: sec,\n        //     fdqa_qst_ans_json_format: questions,\n        // }\n        submitedStat.setIsSubmitted(true);\n      } catch (err) {\n        err.response.data?.message?.email &&\n          message.error(err.response.data?.message?.email[0]);\n\n        err.response.data?.message?.name &&\n          message.error(err.response.data?.message?.name[0]);\n      }\n    };\n\n    handleFeedbackSubmit();\n  };\n\n  return (\n    <>\n      <div className=\"container-fluid py-5\">\n        <h1 className=\"display-5 fw-bold\">{feedbackInfo?.title}</h1>\n        <p className=\"col-md-8 fs-4\">{feedbackInfo?.description}</p>\n\n        {!survey.isSurveyClicked ? (\n          <form\n            onSubmit={(e) => {\n              e.preventDefault;\n              console.log(\"take survey\");\n              setStartTime(new Date().getTime());\n              survey.setIsSurveyClicked(true);\n            }}\n          >\n            <div className=\"form-group mb-3\">\n              <label htmlFor=\"inputUserName\">Name</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"inputUserName\"\n                aria-describedby=\"input-user-name\"\n                placeholder=\"Enter name\"\n                required\n                onChange={(e) =>\n                  setUserData((s) => ({\n                    ...s,\n                    name: e.target.value,\n                  }))\n                }\n              />\n            </div>\n            <div className=\"form-group mb-3\">\n              <label htmlFor=\"inputUserEmail\">Email address</label>\n              <input\n                type=\"email\"\n                className=\"form-control\"\n                id=\"inputUserEmail\"\n                aria-describedby=\"input-user-email\"\n                placeholder=\"Enter email\"\n                // required\n                onChange={(e) =>\n                  setUserData((s) => ({\n                    ...s,\n                    email: e.target.value,\n                  }))\n                }\n              />\n            </div>\n            <button className=\"btn btn-primary btn-lg\" type=\"submit\">\n              Take Survey\n            </button>\n          </form>\n        ) : (\n          <></>\n          // <button\n          //     onClick={() => {\n          //         console.log(\"cancel survey\");\n          //         survey.setIsSurveyClicked(false);\n          //     }}\n          //     className=\"btn btn-danger btn-lg\"\n          //     type=\"button\"\n          // >\n          //     Cancel Survey\n          // </button>\n        )}\n      </div>\n      {survey.isSurveyClicked && (\n        <div className=\"container-fluid py-5\">\n          <Feedback\n            setQuestions={setQuestions}\n            answered={answered}\n            setAnswered={setAnswered}\n            questions={questions}\n            f_questionEditor_cust={f_questionEditor_cust}\n            handleSubmit={handleSubmit}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nconst PageLayout = ({ feedbackContent, survey }: any) => {\n  const [isSubmitted, setIsSubmitted] = useState<boolean>(false);\n  return (\n    <div className=\"container py-4\">\n      <Header companyInfo={feedbackContent?.companyInfo} />\n      <div className=\"p-5 mb-4 rounded-3 shadow-lg\">\n        {!isSubmitted ? (\n          <FeedbackDescription\n            feedbackInfo={feedbackContent?.feedbackInfo}\n            survey={survey}\n            submitedStat={{\n              isSubmitted,\n              setIsSubmitted,\n            }}\n          />\n        ) : (\n          <Result\n            status=\"success\"\n            title=\"Feedback has been Successfully Submitted!\"\n            subTitle=\"Thanks for completing this Feedback. Now create your own — it's free, easy, & beautiful\"\n            extra={\n              <button\n                className=\"btn btn-primary\"\n                type=\"button\"\n                onClick={() => location.reload()}\n              >\n                Take me there!\n              </button>\n            }\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default PageLayout;\n"]},"metadata":{},"sourceType":"module"}