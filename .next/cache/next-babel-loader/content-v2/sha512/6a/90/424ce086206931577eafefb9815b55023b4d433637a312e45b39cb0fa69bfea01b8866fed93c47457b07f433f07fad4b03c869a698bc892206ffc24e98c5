{"ast":null,"code":"import _defineProperty from \"/Users/kings/Downloads/AV SERVICE WEBSITE/AV_SERVICE_WEBISTE_FULL/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/kings/Downloads/AV SERVICE WEBSITE/AV_SERVICE_WEBISTE_FULL/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/kings/Downloads/AV SERVICE WEBSITE/AV_SERVICE_WEBISTE_FULL/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from \"react\";\nimport { message, Result } from \"antd\";\n// config\nimport { DOMAIN_URL } from \"../../../../../config/index\";\nconsole.log(\"DOMAIN URL\", DOMAIN_URL); // components\n\nimport Feedback from \"../feedback/components/Feedback\"; // utils\n\nimport { SC } from \"./utils\";\nimport { submitFeedback } from \"../../../../utils/Apicalls\";\nimport router from \"next/router\";\nimport { cryptData } from \"../../../../utils/utils\";\n\nvar Header = function Header(_ref) {\n  var companyInfo = _ref.companyInfo;\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(\"header\", {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"d-flex flex-column flex-md-row align-items-center pb-3 mb-4 border-bottom\",\n        children: /*#__PURE__*/_jsxs(\"a\", {\n          href: \"/\",\n          className: \"d-flex align-items-center text-dark text-decoration-none\",\n          children: [/*#__PURE__*/_jsx(\"img\", {\n            className: \"logo-size\",\n            src: companyInfo === null || companyInfo === void 0 ? void 0 : companyInfo.c_logo\n          }), \"\\xA0\\xA0\", /*#__PURE__*/_jsxs(\"span\", {\n            className: \"fs-4\",\n            children: [companyInfo === null || companyInfo === void 0 ? void 0 : companyInfo.c_name, \" - Feedback Surveys\"]\n          })]\n        })\n      })\n    })\n  });\n};\n\nvar FeedbackDescription = function FeedbackDescription(_ref2) {\n  var feedbackInfo = _ref2.feedbackInfo,\n      survey = _ref2.survey,\n      submitedStat = _ref2.submitedStat;\n\n  var _useState = useState(typeof feedbackInfo.q_format !== \"undefined\" && feedbackInfo.q_format !== \"\" ? JSON.parse(feedbackInfo.q_format) : []),\n      questions = _useState[0],\n      setQuestions = _useState[1];\n\n  var f_questionEditor_cust = function f_questionEditor_cust(uuid, type, value, option) {\n    if (value) {\n      setAnswered(true);\n    } else {\n      setAnswered(false);\n    }\n\n    console.log(uuid, type, value, questions, option);\n    var result = SC.fc.f_questionEditor(uuid, type, value, questions, option);\n    setQuestions(result);\n  };\n\n  var _useState2 = useState({\n    name: \"\",\n    email: \"\"\n  }),\n      userData = _useState2[0],\n      setUserData = _useState2[1];\n\n  var _useState3 = useState(null),\n      startTime = _useState3[0],\n      setStartTime = _useState3[1];\n\n  var _useState4 = useState(false),\n      answered = _useState4[0],\n      setAnswered = _useState4[1];\n\n  var handleSubmit = function handleSubmit() {\n    var handleFeedbackSubmit = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _router$query, c, ct, f, c_id, fc_id, fdq_id, endTime, time, sec, formData, res, _err$response$data, _err$response$data$me, _err$response$data2, _err$response$data2$m, _err$response$data3, _err$response$data3$m, _err$response$data4, _err$response$data4$m;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _router$query = router.query, c = _router$query.c, ct = _router$query.ct, f = _router$query.f;\n                _context.next = 3;\n                return cryptData(\"dec\", c);\n\n              case 3:\n                c_id = _context.sent;\n                _context.next = 6;\n                return cryptData(\"dec\", ct);\n\n              case 6:\n                fc_id = _context.sent;\n                _context.next = 9;\n                return cryptData(\"dec\", f);\n\n              case 9:\n                fdq_id = _context.sent;\n                endTime = new Date().getTime();\n                time = endTime - startTime;\n                sec = Math.floor(time / 1000 % 60); // console.log(\"Time taken\", sec);\n\n                formData = new FormData();\n                formData.append(\"c_id\", c_id);\n                formData.append(\"fc_id\", fc_id);\n                formData.append(\"fdq_id\", fdq_id);\n                formData.append(\"fdqa_time_taken_to_finish\", JSON.stringify(sec));\n                formData.append(\"fdqa_qst_ans_json_format\", JSON.stringify(questions));\n                formData.append(\"name\", userData === null || userData === void 0 ? void 0 : userData.name);\n                formData.append(\"email\", userData === null || userData === void 0 ? void 0 : userData.email);\n                console.log(formData);\n                _context.prev = 22;\n                _context.next = 25;\n                return submitFeedback(formData);\n\n              case 25:\n                res = _context.sent;\n                console.log(\"RES\", res); //     {\n                //     c_id: parseInt(c_id),\n                //     fc_id: parseInt(fc_id),\n                //     fdq_id: parseInt(fdq_id),\n                // name: userData?.name,\n                // email: userData?.email,\n                //     fdqa_time_taken_to_finish: sec,\n                //     fdqa_qst_ans_json_format: questions,\n                // }\n\n                submitedStat.setIsSubmitted(true);\n                _context.next = 34;\n                break;\n\n              case 30:\n                _context.prev = 30;\n                _context.t0 = _context[\"catch\"](22);\n                ((_err$response$data = _context.t0.response.data) === null || _err$response$data === void 0 ? void 0 : (_err$response$data$me = _err$response$data.message) === null || _err$response$data$me === void 0 ? void 0 : _err$response$data$me.email) && message.error((_err$response$data2 = _context.t0.response.data) === null || _err$response$data2 === void 0 ? void 0 : (_err$response$data2$m = _err$response$data2.message) === null || _err$response$data2$m === void 0 ? void 0 : _err$response$data2$m.email[0]);\n                ((_err$response$data3 = _context.t0.response.data) === null || _err$response$data3 === void 0 ? void 0 : (_err$response$data3$m = _err$response$data3.message) === null || _err$response$data3$m === void 0 ? void 0 : _err$response$data3$m.name) && message.error((_err$response$data4 = _context.t0.response.data) === null || _err$response$data4 === void 0 ? void 0 : (_err$response$data4$m = _err$response$data4.message) === null || _err$response$data4$m === void 0 ? void 0 : _err$response$data4$m.name[0]);\n\n              case 34:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[22, 30]]);\n      }));\n\n      return function handleFeedbackSubmit() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    handleFeedbackSubmit();\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"container-fluid py-5\",\n      children: [/*#__PURE__*/_jsx(\"h1\", {\n        className: \"display-5 fw-bold\",\n        children: feedbackInfo === null || feedbackInfo === void 0 ? void 0 : feedbackInfo.title\n      }), /*#__PURE__*/_jsx(\"p\", {\n        className: \"col-md-8 fs-4\",\n        children: feedbackInfo === null || feedbackInfo === void 0 ? void 0 : feedbackInfo.description\n      }), !survey.isSurveyClicked ? /*#__PURE__*/_jsxs(\"form\", {\n        onSubmit: function onSubmit(e) {\n          e.preventDefault;\n          console.log(\"take survey\");\n          setStartTime(new Date().getTime());\n          survey.setIsSurveyClicked(true);\n        },\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"form-group mb-3\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"inputUserName\",\n            children: \"Name\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            id: \"inputUserName\",\n            \"aria-describedby\": \"input-user-name\",\n            placeholder: \"Enter name\",\n            required: true,\n            onChange: function onChange(e) {\n              return setUserData(function (s) {\n                return _objectSpread(_objectSpread({}, s), {}, {\n                  name: e.target.value\n                });\n              });\n            }\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"form-group mb-3\",\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"inputUserEmail\",\n            children: \"Email address\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"email\",\n            className: \"form-control\",\n            id: \"inputUserEmail\",\n            \"aria-describedby\": \"input-user-email\",\n            placeholder: \"Enter email\" // required\n            ,\n            onChange: function onChange(e) {\n              return setUserData(function (s) {\n                return _objectSpread(_objectSpread({}, s), {}, {\n                  email: e.target.value\n                });\n              });\n            }\n          })]\n        }), /*#__PURE__*/_jsx(\"button\", {\n          className: \"btn btn-primary btn-lg\",\n          type: \"submit\",\n          children: \"Take Survey\"\n        })]\n      }) : /*#__PURE__*/_jsx(_Fragment, {}) // <button\n      //     onClick={() => {\n      //         console.log(\"cancel survey\");\n      //         survey.setIsSurveyClicked(false);\n      //     }}\n      //     className=\"btn btn-danger btn-lg\"\n      //     type=\"button\"\n      // >\n      //     Cancel Survey\n      // </button>\n      ]\n    }), survey.isSurveyClicked && /*#__PURE__*/_jsx(\"div\", {\n      className: \"container-fluid py-5\",\n      children: /*#__PURE__*/_jsx(Feedback, {\n        setQuestions: setQuestions,\n        answered: answered,\n        setAnswered: setAnswered,\n        questions: questions,\n        f_questionEditor_cust: f_questionEditor_cust,\n        handleSubmit: handleSubmit\n      })\n    })]\n  });\n};\n\nvar PageLayout = function PageLayout(_ref4) {\n  var feedbackContent = _ref4.feedbackContent,\n      survey = _ref4.survey;\n\n  var _useState5 = useState(false),\n      isSubmitted = _useState5[0],\n      setIsSubmitted = _useState5[1];\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"container py-4\",\n    children: [/*#__PURE__*/_jsx(Header, {\n      companyInfo: feedbackContent === null || feedbackContent === void 0 ? void 0 : feedbackContent.companyInfo\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"p-5 mb-4 rounded-3 shadow-lg\",\n      children: !isSubmitted ? /*#__PURE__*/_jsx(FeedbackDescription, {\n        feedbackInfo: feedbackContent === null || feedbackContent === void 0 ? void 0 : feedbackContent.feedbackInfo,\n        survey: survey,\n        submitedStat: {\n          isSubmitted: isSubmitted,\n          setIsSubmitted: setIsSubmitted\n        }\n      }) : /*#__PURE__*/_jsx(Result, {\n        status: \"success\",\n        title: \"Feedback has been Successfully Submitted!\",\n        subTitle: \"Thanks for completing this Feedback. Now create your own \\u2014 it's free, easy, & beautiful\",\n        extra: /*#__PURE__*/_jsx(\"button\", {\n          className: \"btn btn-primary\",\n          type: \"button\",\n          onClick: function onClick() {\n            return location.reload();\n          },\n          children: \"Take me there!\"\n        })\n      })\n    })]\n  });\n};\n\nexport default PageLayout;","map":null,"metadata":{},"sourceType":"module"}